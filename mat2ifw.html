<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="renderer" content="webkit" />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <title>MAT2IFW</title>
        <link href="/css/mdui.min.css" rel="stylesheet">
        <script src="/js/mdui.min.js"></script>

        <script type="text/javascript">
            function get(){
                var pattern = /^[a-z][a-z0-9_\/\$]*(\.[a-z0-9_\/\$]+)+[0-9a-z_\/\$]$/i;
                var names = document.getElementById("convert").value.split('\n');
                var ifw = "<rules>\n";
                var type = "";
                for (var typeLoop = 0; typeLoop < 3; typeLoop++){
                    switch(typeLoop){
                        case 0:
                            type = "broadcast";
                            break;
                        case 1:
                            type = "service";
                            break;
                        case 2:
                            type = "activity";
                    }
                    ifw = ifw + "  <" + type + " block=\"true\" log=\"false\">\n";
                    for(var nameLoop = 0; nameLoop < names.length; nameLoop++){
                        if(pattern.test(names[nameLoop])){
                            ifw = ifw + "    <component-filter name=\"" + names[nameLoop] + "\" />\n";
                        };
                    };
                    ifw = ifw + "  </" + type + ">\n";
                };
                ifw = ifw + "</rules>";
                document.getElementById("convert").value = ifw;
            }
        </script>
    </head>
    <body class="mdui-appbar-with-toolbar mdui-theme-primary-indigo mdui-theme-accent-pink">
        <header class="mdui-appbar mdui-appbar-fixed">
            <div class="mdui-toolbar mdui-color-theme">
                <i class="mdui-icon material-icons">&#xe8b8;</i>
                <a href="#" class="mdui-typo-headline mdui-hidden-xs">MAT2IFW</a>
            </div>
        </header>
        
        <div class="mdui-container doc-container">
            <div class="mdui-textfield mdui-textfield-floating-label">
                <label class="mdui-textfield-label">Input</label>
                <textarea class="mdui-textfield-input" type="text" name="convert" id="convert"></textarea>
            </div>
            <input class="mdui-btn mdui-btn-raised mdui-ripple mdui-color-theme-accent" type="button" value="Convert" onclick="get();" />
        </div>
    </body>
</html>
